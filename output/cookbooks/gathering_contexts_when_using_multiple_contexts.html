<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Gathering Contexts when using Multiple Contexts &mdash; Behat 3.0.12 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/borg.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/documentation.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Comfortaa" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Behat 3.0.12 documentation" href="../index.html" />
    <link rel="up" title="Cookbooks" href="../cookbooks.html" />
    <link rel="next" title="Useful Resources" href="../useful_resources.html" />
    <link rel="prev" title="Integrating Symfony2 with Behat" href="integrating_symfony2_with_behat.html" /> 
  </head>
  <body role="document">
    <header>
        <a class="logo" href="http://behat.org">behat</a>

        <nav>
            <ul>
                <li><a href="http://behat.org">About</a></li>
                <li class="active"><a href="/">Docs</a></li>
            </ul>
        </nav>

        <a class="fork" href="https://github.com/Behat/Behat">Fork us</a>
    </header>

    <section>

        <nav class="toc">
            <h3>Chapters</h3>
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../cookbooks.html">Cookbooks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="integrating_symfony2_with_behat.html">Integrating Symfony2 with Behat</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Gathering Contexts when using Multiple Contexts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../useful_resources.html">Useful Resources</a></li>
</ul>

            
        </nav>
        <section class="text">
            
  <div class="section" id="gathering-contexts-when-using-multiple-contexts">
<h1>Gathering Contexts when using Multiple Contexts<a class="headerlink" href="#gathering-contexts-when-using-multiple-contexts" title="Permalink to this headline">Â¶</a></h1>
<p>When splitting the definitions in multiple contexts, it might be useful to
access a context from another one. This is particularly useful when migrating
from Behat 2.x to replace subcontexts.</p>
<p>Behat allows to access the environment in
<a class="reference internal" href="../user_guide/feature_contexts/hooking_into_the_test_process.html#user-guide-feature-contexts-hooking-into-the-test-process-hooks"><span>Hooks</span></a>,
so other contexts can be retrieved using a <code class="docutils literal"><span class="pre">BeforeScenario</span></code> hook:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Behat\Behat\Context\Context</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Behat\Hook\Scope\BeforeScenarioScope</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">implements</span> <span class="nx">Context</span>
<span class="p">{</span>
    <span class="sd">/** @var \Behat\MinkExtension\Context\MinkContext */</span>
    <span class="k">private</span> <span class="nv">$minkContext</span><span class="p">;</span>

    <span class="sd">/** @BeforeScenario */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">gatherContexts</span><span class="p">(</span><span class="nx">BeforeScenarioScope</span> <span class="nv">$scope</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$environment</span> <span class="o">=</span> <span class="nv">$scope</span><span class="o">-&gt;</span><span class="na">getEnvironment</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">minkContext</span> <span class="o">=</span> <span class="nv">$environment</span><span class="o">-&gt;</span><span class="na">getContext</span><span class="p">(</span><span class="s1">&#39;Behat\MinkExtension\Context\MinkContext&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Circular references in context objects would prevent the PHP reference
counting from collecting contexts at the end of each scenarios, forcing
to wait for the garbage collector to run. This would increase the memory
usage of your Behat run. To prevent that, it is better to avoid storing
the environment itself in your context classes. It is also better to
avoid creating circular references between different contexts.</p>
</div>
</div>


        </section>

    </section>

  </body>
</html>
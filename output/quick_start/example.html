<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example &mdash; Behat 3.0.12 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/borg.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/documentation.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Comfortaa" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Behat 3.0.12 documentation" href="../index.html" />
    <link rel="up" title="Quick Start" href="../quick_start.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Quick Start" href="../quick_start.html" /> 
  </head>
  <body role="document">
    <header>
        <a class="logo" href="http://behat.org">behat</a>

        <nav>
            <ul>
                <li><a href="http://behat.org">About</a></li>
                <li class="active"><a href="/">Docs</a></li>
            </ul>
        </nav>

        <a class="fork" href="https://github.com/Behat/Behat">Fork us</a>
    </header>

    <section>

        <nav class="toc">
            <h3>Chapters</h3>
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../quick_start.html">Quick Start</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html">Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks.html">Cookbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../useful_resources.html">Useful Resources</a></li>
</ul>

            
        </nav>
        <section class="text">
            
  <div class="section" id="example">
<h1>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h1>
<p>Let&#8217;s imagine that you are building a completely new e-commerce platform.
One of the key features of any online shopping platform is the ability to buy
products. But before buying anything, customers should be able to tell the
system which products they are interested in buying. You need a basket.
So let&#8217;s write our first user-story:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> Product basket</span>
<span class="nf">  In order to buy products</span>
<span class="nf">  As a customer</span>
<span class="nf">  I need to be able to put interesting products into a basket</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a basic Gherkin feature and it is a simple description of
this feature&#8217;s story. Every feature starts with this same format: a
line with the title of the feature, followed by three lines that
describe the benefit, the role and the feature itself with any
amount of additional description lines following after.</p>
</div>
<p>Before we begin to work on this feature, we must fulfil a promise of any
user-story and have a real conversation with our business stakeholders.
They might say that they want customers to see not only the combined
price of the products in the basket, but the price reflecting both the
VAT (20%) and the delivery cost (which depends on the total price of
the products):</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> Product basket</span>
<span class="nf">  In order to buy products</span>
<span class="nf">  As a customer</span>
<span class="nf">  I need to be able to put interesting products into a basket</span>

<span class="nf">  Rules:</span>
<span class="nf">  - VAT is 20%</span>
<span class="nf">  - Delivery for basket under £10 is £3</span>
<span class="nf">  - Delivery for basket over £10 is £2</span>
</pre></div>
</div>
<p>So as you can see, it already becomes tricky (ambiguous at least) to talk
about this feature in terms of <em>rules</em>. What does it mean to add VAT? What
happens when we have two products, one of which is less than £10 and another
that is more? Instead you proceed with having a back-and-forth chat with
stakeholders in form of actual examples of a <em>customer</em> adding products to
the basket. After some time, you will come up with your first behaviour
examples (in BDD these are called <em>scenarios</em>):</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> Product basket</span>
<span class="nf">  In order to buy products</span>
<span class="nf">  As a customer</span>
<span class="nf">  I need to be able to put interesting products into a basket</span>

<span class="nf">  Rules:</span>
<span class="nf">  - VAT is 20%</span>
<span class="nf">  - Delivery for basket under £10 is £3</span>
<span class="nf">  - Delivery for basket over £10 is £2</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Buying a single product under £10</span>
<span class="k">    Given </span><span class="nf">there is a &quot;</span><span class="s">Sith Lord Lightsaber</span><span class="nf">&quot;, which costs £</span><span class="s">5</span><span class="nf"></span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I add the &quot;</span><span class="s">Sith Lord Lightsaber</span><span class="nf">&quot; to the basket</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should have </span><span class="s">1</span><span class="nf"> product in the basket</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the overall basket price should be £</span><span class="s">9</span><span class="nf"></span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Buying a single product over £10</span>
<span class="k">    Given </span><span class="nf">there is a &quot;</span><span class="s">Sith Lord Lightsaber</span><span class="nf">&quot;, which costs £</span><span class="s">15</span><span class="nf"></span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I add the &quot;</span><span class="s">Sith Lord Lightsaber</span><span class="nf">&quot; to the basket</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should have </span><span class="s">1</span><span class="nf"> product in the basket</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the overall basket price should be £</span><span class="s">20</span><span class="nf"></span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Buying two products over £10</span>
<span class="k">    Given </span><span class="nf">there is a &quot;</span><span class="s">Sith Lord Lightsaber</span><span class="nf">&quot;, which costs £</span><span class="s">10</span><span class="nf"></span>
<span class="nf">    </span><span class="k">And </span><span class="nf">there is a &quot;</span><span class="s">Jedi Lightsaber</span><span class="nf">&quot;, which costs £</span><span class="s">5</span><span class="nf"></span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I add the &quot;</span><span class="s">Sith Lord Lightsaber</span><span class="nf">&quot; to the basket</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I add the &quot;</span><span class="s">Jedi Lightsaber</span><span class="nf">&quot; to the basket</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should have </span><span class="s">2</span><span class="nf"> products in the basket</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the overall basket price should be £</span><span class="s">20</span><span class="nf"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Each scenario always follows the same basic format:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Scenario:</span><span class="nf"> Some description of the scenario</span>
<span class="k">  Given </span><span class="nf">some context</span>
<span class="nf">  </span><span class="k">When </span><span class="nf">some event</span>
<span class="nf">  </span><span class="k">Then </span><span class="nf">outcome</span>
</pre></div>
</div>
<p>Each part of the scenario - the <em>context</em>, the <em>event</em>,  and the
<em>outcome</em> - can be extended by adding the <code class="docutils literal"><span class="pre">And</span></code> or <code class="docutils literal"><span class="pre">But</span></code> keyword:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Scenario:</span><span class="nf"> Some description of the scenario</span>
<span class="k">  Given </span><span class="nf">some context</span>
<span class="nf">  </span><span class="k">And </span><span class="nf">more context</span>
<span class="nf">  </span><span class="k">When </span><span class="nf">some event</span>
<span class="nf">  </span><span class="k">And </span><span class="nf">second event occurs</span>
<span class="nf">  </span><span class="k">Then </span><span class="nf">outcome</span>
<span class="nf">  </span><span class="k">And </span><span class="nf">another outcome</span>
<span class="nf">  </span><span class="k">But </span><span class="nf">another outcome</span>
</pre></div>
</div>
<p class="last">There&#8217;s no actual difference between, <code class="docutils literal"><span class="pre">Then</span></code>, <code class="docutils literal"><span class="pre">And</span></code> <code class="docutils literal"><span class="pre">But</span></code> or any
of the other words that start each line. These keywords are all made
available so that your scenarios are natural and readable.</p>
</div>
<p>This is your and your stakeholders&#8217; shared understanding of the project written
in a structured format. It is all based on the clear and constructive
conversation you have had together. Now you can put this text in a simple file -
<code class="docutils literal"><span class="pre">features/basket.feature</span></code> - under your project directory and start
implementing the feature by manually checking if it fits the defined scenarios.
No tools (Behat in our case) needed. That, in essence, is what BDD is.</p>
<p>If you are still reading, it means you are expecting more. Good! Because
even though tools are not the central piece of BDD puzzle, they do improve
the entire process and add a lot of benefits on top of it. For one, tools
like Behat actually do close the communication loop of the story. It means
that not only you and your stakeholder can together define how your
feature should work before going to implement it, BDD tools allow you to
automate that behaviour check after this feature is implemented. So everybody
knows when it is done and when the team can stop writing code. That, in
essence, is what Behat is.</p>
<p>Behat is an executable that you&#8217;ll run from the command line to test that your
application behaves exactly as you described in your <code class="docutils literal"><span class="pre">*.feature</span></code> scenarios.</p>
<p>Going forward, we&#8217;ll show you how Behat can be used to automate this particular
basket feature as a test verifying that the application (existing or not)
works as you and your stakeholders expect (according to your conversation) it
to.</p>
<p>That&#8217;s it! Behat can be used to automate anything, including web-related
functionality via the <a class="reference external" href="https://github.com/behat/mink">Mink</a> library.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to learn more about the philosophy of &#8220;Behaviour Driven
Development&#8221; of your application, see <a class="reference external" href="http://blog.dannorth.net/whats-in-a-story/">What&#8217;s in a Story?</a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Behat was heavily inspired by Ruby&#8217;s <a class="reference external" href="http://cukes.info/">Cucumber</a> project. Since v3.0,
Behat is considered an official Cucumber implementation in PHP and is part
of one big family of BDD tools.</p>
</div>
</div>


        </section>

    </section>

  </body>
</html>